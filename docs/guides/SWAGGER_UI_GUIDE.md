# Swagger UI μ‚¬μ© κ°€μ΄λ“

## π“ μ ‘μ† λ°©λ²•

1. μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ (`python -m src.api.main`)
2. λΈλΌμ°μ €μ—μ„ λ‹¤μ μ£Όμ†λ΅ μ ‘μ†:
   ```
   http://localhost:8000/docs
   ```

---

## π― ν™”λ©΄ κµ¬μ„±

Swagger UI ν™”λ©΄μ€ λ‹¤μκ³Ό κ°™μ΄ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤:

### μƒλ‹¨ λ©”λ‰΄
- **API μ •λ³΄**: μ λ©, μ„¤λ…, λ²„μ „ λ“±
- **Authorize λ²„νΌ**: API ν‚¤ μΈμ¦ (ν•„μ”ν• κ²½μ°)

### μ™Όμ½ μ‚¬μ΄λ“λ°”
- **μ—”λ“ν¬μΈνΈ λ©λ΅**: λ¨λ“  API μ—”λ“ν¬μΈνΈκ°€ κ·Έλ£Ήλ³„λ΅ μ •λ¦¬λ¨
  - `health`: ν—¬μ¤μ²΄ν¬
  - `search`: λ¬Έμ„ κ²€μƒ‰
  - `ask`: μ§μμ‘λ‹µ
  - `admin`: κ΄€λ¦¬μ κΈ°λ¥
  - `monitoring`: λ¨λ‹ν„°λ§

### λ©”μΈ μμ—­
- μ„ νƒν• μ—”λ“ν¬μΈνΈμ μƒμ„Έ μ •λ³΄
- μ”μ²­ νλΌλ―Έν„° μ…λ ¥ νΌ
- "Try it out" λ²„νΌ
- μ‘λ‹µ μμ‹

---

## π€ μ‚¬μ© λ°©λ²• (λ‹¨κ³„λ³„)

### μμ  1: ν—¬μ¤μ²΄ν¬ ν…μ¤νΈ

1. **μ—”λ“ν¬μΈνΈ μ°ΎκΈ°**
   - μ™Όμ½ μ‚¬μ΄λ“λ°”μ—μ„ `health` μ„Ήμ… ν™•μ¥
   - `GET /api/v1/health` ν΄λ¦­

2. **"Try it out" λ²„νΌ ν΄λ¦­**
   - νλΌλ―Έν„° μ…λ ¥ νΌμ΄ ν™μ„±ν™”λ©λ‹λ‹¤

3. **"Execute" λ²„νΌ ν΄λ¦­**
   - μ„λ²„λ΅ μ”μ²­μ΄ μ „μ†΅λ©λ‹λ‹¤

4. **κ²°κ³Ό ν™•μΈ**
   - **Response body**: μ„λ²„ μ‘λ‹µ (JSON ν•μ‹)
   - **Response headers**: HTTP ν—¤λ” μ •λ³΄
   - **Curl**: μ‹¤μ  curl λ…λ Ήμ–΄
   - **Request URL**: μ‹¤μ  μ”μ²­ URL

**μμƒ μ‘λ‹µ:**
```json
{
  "status": "healthy",
  "version": "0.1.0",
  "timestamp": "2025-12-05T11:08:58.398388"
}
```

---

### μμ  2: λ¬Έμ„ κ²€μƒ‰ API μ‚¬μ©

1. **μ—”λ“ν¬μΈνΈ μ„ νƒ**
   - μ™Όμ½ μ‚¬μ΄λ“λ°”μ—μ„ `search` μ„Ήμ… ν™•μ¥
   - `POST /api/v1/search` ν΄λ¦­

2. **"Try it out" λ²„νΌ ν΄λ¦­**

3. **μ”μ²­ λ³Έλ¬Έ μ…λ ¥**
   - Request body μ„Ήμ…μ μμ‹λ¥Ό μμ •ν•κ±°λ‚ μƒλ΅ μ‘μ„±
   
   **κΈ°λ³Έ μμ‹:**
   ```json
   {
     "query": "μ‚¬κΈ°μ£„ μ²λ²",
     "n_results": 5
   }
   ```
   
   **κ³ κΈ‰ μμ‹ (ν•„ν„° ν¬ν•¨):**
   ```json
   {
     "query": "μ‚¬κΈ°μ£„ μ²λ²",
     "n_results": 5,
     "document_types": ["statute", "case"],
     "category": "ν•μ‚¬",
     "sub_category": "μ‚¬κΈ°"
   }
   ```

4. **"Execute" λ²„νΌ ν΄λ¦­**

5. **κ²°κ³Ό ν™•μΈ**
   - κ²€μƒ‰λ λ¬Έμ„ λ©λ΅μ΄ ν‘μ‹λ©λ‹λ‹¤
   - κ° λ¬Έμ„μ ID, λ‚΄μ©, λ©”νƒ€λ°μ΄ν„°, μ μ λ“±μ΄ ν¬ν•¨λ©λ‹λ‹¤

**μ‘λ‹µ μμ‹:**
```json
{
  "query": "μ‚¬κΈ°μ£„ μ²λ²",
  "results": [
    {
      "id": "statute-347",
      "document": "ν•λ²• μ 347μ΅°(μ‚¬κΈ°)...",
      "metadata": {
        "law_name": "ν•λ²•",
        "article_number": "347",
        "category": "ν•μ‚¬",
        "sub_category": "μ‚¬κΈ°"
      },
      "score": 0.95
    }
  ],
  "total": 1,
  "timestamp": "2025-12-05T11:10:00"
}
```

---

### μμ  3: μ§μμ‘λ‹µ API μ‚¬μ©

1. **μ—”λ“ν¬μΈνΈ μ„ νƒ**
   - `ask` μ„Ήμ…μ—μ„ `POST /api/v1/ask` ν΄λ¦­

2. **"Try it out" λ²„νΌ ν΄λ¦­**

3. **μ”μ²­ λ³Έλ¬Έ μ…λ ¥**
   ```json
   {
     "query": "μ‚¬κΈ°μ£„λ” μ–΄λ–¤ μ²λ²μ„ λ°›λ‚μ”?",
     "session_id": "test-session-123",
     "stream": false,
     "document_types": ["statute", "case"]
   }
   ```

4. **νλΌλ―Έν„° μ„¤λ…**
   - `query` (ν•„μ): μ§λ¬Έ λ‚΄μ©
   - `session_id` (μ„ νƒ): λ€ν™” μ—°μ†μ„±μ„ μ„ν• μ„Έμ… ID
   - `stream` (μ„ νƒ): μ¤νΈλ¦¬λ° μ‘λ‹µ μ—¬λ¶€ (κΈ°λ³Έκ°’: false)
   - `document_types` (μ„ νƒ): κ²€μƒ‰ν•  λ¬Έμ„ νƒ€μ…

5. **"Execute" λ²„νΌ ν΄λ¦­**

6. **κ²°κ³Ό ν™•μΈ**
   - AIκ°€ μƒμ„±ν• λ‹µλ³€
   - μ°Έμ΅°ν• λ¬Έμ„ λ©λ΅ (sources)
   - μ„Έμ… ID

---

### μμ  4: νμΌ μ—…λ΅λ“ (κ΄€λ¦¬μ API)

1. **μ—”λ“ν¬μΈνΈ μ„ νƒ**
   - `admin` μ„Ήμ…μ—μ„ `POST /api/v1/admin/upload` ν΄λ¦­

2. **"Try it out" λ²„νΌ ν΄λ¦­**

3. **API ν‚¤ μ…λ ¥** (ν•„μ”ν• κ²½μ°)
   - μƒλ‹¨μ "Authorize" λ²„νΌ ν΄λ¦­
   - API ν‚¤ μ…λ ¥
   - λλ” μ”μ²­ ν—¤λ”μ— μ§μ ‘ μ¶”κ°€

4. **νμΌ μ„ νƒ**
   - "Choose File" λ²„νΌ ν΄λ¦­
   - μ—…λ΅λ“ν•  JSON νμΌ μ„ νƒ (μ: `data/samples/statute-347.json`)

5. **"Execute" λ²„νΌ ν΄λ¦­**

6. **κ²°κ³Ό ν™•μΈ**
   - μ—…λ΅λ“ λ° μΈλ±μ‹± κ²°κ³Όκ°€ ν‘μ‹λ©λ‹λ‹¤

---

## π’΅ μ μ©ν• κΈ°λ¥λ“¤

### 1. μ¤ν‚¤λ§ λ³΄κΈ°
- κ° μ—”λ“ν¬μΈνΈμ "Schema" μ„Ήμ…μ„ ν΄λ¦­ν•λ©΄
- μ”μ²­/μ‘λ‹µ λ°μ΄ν„° κµ¬μ΅°λ¥Ό μμ„Έν λ³Ό μ μμµλ‹λ‹¤
- ν•„μ ν•„λ“, μ„ νƒ ν•„λ“, λ°μ΄ν„° νƒ€μ… λ“±μ„ ν™•μΈν•  μ μμµλ‹λ‹¤

### 2. μμ‹ κ°’ μ‚¬μ©
- λ§μ€ ν•„λ“μ— "Example" κ°’μ΄ ν‘μ‹λ©λ‹λ‹¤
- μ΄λ¥Ό λ³µμ‚¬ν•΄μ„ μ‚¬μ©ν•κ±°λ‚ μ°Έκ³ ν•  μ μμµλ‹λ‹¤

### 3. cURL λ…λ Ήμ–΄ λ³µμ‚¬
- "Execute" ν›„ "Curl" μ„Ήμ…μ—μ„
- μ‹¤μ  μ‚¬μ© κ°€λ¥ν• curl λ…λ Ήμ–΄λ¥Ό λ³µμ‚¬ν•  μ μμµλ‹λ‹¤
- ν„°λ―Έλ„μ—μ„ λ°”λ΅ μ‚¬μ© κ°€λ¥ν•©λ‹λ‹¤

### 4. Request URL ν™•μΈ
- "Execute" ν›„ "Request URL" μ„Ήμ…μ—μ„
- μ‹¤μ  μ”μ²­ URLμ„ ν™•μΈν•  μ μμµλ‹λ‹¤
- λ‹¤λ¥Έ λ„κµ¬μ—μ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤

---

## π” κ° μ—”λ“ν¬μΈνΈ μƒμ„Έ μ„¤λ…

### Health μ—”λ“ν¬μΈνΈ

#### `GET /api/v1/health`
- **μ©λ„**: μ„λ²„ μƒνƒ ν™•μΈ
- **νλΌλ―Έν„°**: μ—†μ
- **μ‘λ‹µ**: μ„λ²„ μƒνƒ, λ²„μ „, νƒ€μ„μ¤νƒ¬ν”„

#### `GET /api/v1/health/detailed`
- **μ©λ„**: μƒμ„Έν• μ„λ²„ μƒνƒ ν™•μΈ
- **νλΌλ―Έν„°**: μ—†μ
- **μ‘λ‹µ**: λ²΅ν„° DB, μ„λ² λ”© λ¨λΈ λ“± κ° μ»΄ν¬λ„νΈ μƒνƒ

---

### Search μ—”λ“ν¬μΈνΈ

#### `POST /api/v1/search`
- **μ©λ„**: λ²•λ¥  λ¬Έμ„ κ²€μƒ‰
- **μ”μ²­ λ³Έλ¬Έ**:
  ```json
  {
    "query": "κ²€μƒ‰μ–΄",
    "n_results": 5,              // λ°ν™ν•  κ²°κ³Ό μ (1-20)
    "document_types": ["statute"], // λ¬Έμ„ νƒ€μ… ν•„ν„°
    "category": "ν•μ‚¬",           // μΉ΄ν…κ³ λ¦¬ ν•„ν„°
    "sub_category": "μ‚¬κΈ°"        // ν•μ„ μΉ΄ν…κ³ λ¦¬ ν•„ν„°
  }
  ```
- **μ‘λ‹µ**: κ²€μƒ‰λ λ¬Έμ„ λ©λ΅κ³Ό λ©”νƒ€λ°μ΄ν„°

---

### Ask μ—”λ“ν¬μΈνΈ

#### `POST /api/v1/ask`
- **μ©λ„**: λ²•λ¥  μ§λ¬Έμ— λ€ν• AI λ‹µλ³€ μƒμ„±
- **μ”μ²­ λ³Έλ¬Έ**:
  ```json
  {
    "query": "μ§λ¬Έ λ‚΄μ©",
    "session_id": "optional-session-id",  // λ€ν™” μ—°μ†μ„±
    "stream": false,                      // μ¤νΈλ¦¬λ° μ—¬λ¶€
    "document_types": ["statute", "case"] // λ¬Έμ„ νƒ€μ… ν•„ν„°
  }
  ```
- **μ‘λ‹µ**: AI λ‹µλ³€, μ°Έμ΅° λ¬Έμ„, μ„Έμ… ID

---

### Admin μ—”λ“ν¬μΈνΈ

#### `POST /api/v1/admin/upload`
- **μ©λ„**: λ¬Έμ„ μ—…λ΅λ“ λ° μΈλ±μ‹±
- **μΈμ¦**: API ν‚¤ ν•„μ” (X-API-Key ν—¤λ”)
- **νλΌλ―Έν„°**: 
  - `file`: μ—…λ΅λ“ν•  JSON νμΌ
- **μ‘λ‹µ**: μ—…λ΅λ“ λ° μΈλ±μ‹± κ²°κ³Ό

#### `POST /api/v1/admin/reindex`
- **μ©λ„**: λ²΅ν„° DB μ¬μΈλ±μ‹±
- **μΈμ¦**: API ν‚¤ ν•„μ”
- **νλΌλ―Έν„°**: μ—†μ
- **μ‘λ‹µ**: μ¬μΈλ±μ‹± κ²°κ³Ό

---

## β οΈ μ£Όμμ‚¬ν•­

### 1. API ν‚¤ μΈμ¦
- μΌλ¶€ κ΄€λ¦¬μ μ—”λ“ν¬μΈνΈλ” API ν‚¤κ°€ ν•„μ”ν•©λ‹λ‹¤
- μƒλ‹¨μ "Authorize" λ²„νΌμ„ ν΄λ¦­ν•μ—¬ API ν‚¤λ¥Ό μ…λ ¥ν•μ„Έμ”
- λλ” μ”μ²­ ν—¤λ”μ— μ§μ ‘ μ¶”κ°€ν•  μ μμµλ‹λ‹¤

### 2. ν•„μ ν•„λ“
- λΉ¨κ°„μƒ‰ λ³„ν‘(*)κ°€ μλ” ν•„λ“λ” ν•„μμ…λ‹λ‹¤
- ν•„μ ν•„λ“λ¥Ό μ…λ ¥ν•μ§€ μ•μΌλ©΄ μ”μ²­μ΄ μ‹¤ν¨ν•©λ‹λ‹¤

### 3. λ°μ΄ν„° νƒ€μ…
- κ° ν•„λ“μ λ°μ΄ν„° νƒ€μ…μ„ ν™•μΈν•μ„Έμ”
- μ: `n_results`λ” μ«μ, `document_types`λ” λ°°μ—΄

### 4. μ—λ¬ μ²λ¦¬
- μ”μ²­μ΄ μ‹¤ν¨ν•λ©΄ "Response body"μ— μ—λ¬ λ©”μ‹μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤
- "Response Code"λ¥Ό ν™•μΈν•μ—¬ HTTP μƒνƒ μ½”λ“λ¥Ό ν™•μΈν•μ„Έμ”
  - `200`: μ„±κ³µ
  - `400`: μλ»λ μ”μ²­
  - `401`: μΈμ¦ μ‹¤ν¨
  - `500`: μ„λ²„ μ¤λ¥

---

## π“ μ‹¤μ „ μμ 

### μ‹λ‚λ¦¬μ¤ 1: ν•μ‚¬ μ‚¬κΈ° κ΄€λ ¨ λ²•λ Ή κ²€μƒ‰

1. `POST /api/v1/search` μ„ νƒ
2. "Try it out" ν΄λ¦­
3. λ‹¤μ JSON μ…λ ¥:
   ```json
   {
     "query": "ν•μ‚¬ μ‚¬κΈ°μ£„",
     "n_results": 10,
     "document_types": ["statute"],
     "category": "ν•μ‚¬",
     "sub_category": "μ‚¬κΈ°"
   }
   ```
4. "Execute" ν΄λ¦­
5. κ²°κ³Ό ν™•μΈ

### μ‹λ‚λ¦¬μ¤ 2: νλ΅€ κΈ°λ° μ§μμ‘λ‹µ

1. `POST /api/v1/ask` μ„ νƒ
2. "Try it out" ν΄λ¦­
3. λ‹¤μ JSON μ…λ ¥:
   ```json
   {
     "query": "μ‚¬κΈ°μ£„ νλ΅€μ—μ„ μ¤‘μ”ν• νλ‹¨ κΈ°μ¤€μ€ λ¬΄μ—‡μΈκ°€μ”?",
     "document_types": ["case"],
     "stream": false
   }
   ```
4. "Execute" ν΄λ¦­
5. AI λ‹µλ³€κ³Ό μ°Έμ΅° νλ΅€ ν™•μΈ

### μ‹λ‚λ¦¬μ¤ 3: λ€ν™” μ—°μ†μ„± μ μ§€

1. μ²« λ²μ§Έ μ§λ¬Έ:
   ```json
   {
     "query": "μ‚¬κΈ°μ£„λ” λ¬΄μ—‡μΈκ°€μ”?",
     "session_id": "my-session-001"
   }
   ```
   - μ‘λ‹µμ—μ„ `session_id` ν™•μΈ

2. λ‘ λ²μ§Έ μ§λ¬Έ (κ°™μ€ μ„Έμ…):
   ```json
   {
     "query": "κ·ΈλΌ μ²λ²μ€ μ–΄λ–»κ² λλ‚μ”?",
     "session_id": "my-session-001"
   }
   ```
   - μ΄μ „ λ€ν™” λ§¥λ½μ„ μ΄ν•΄ν• λ‹µλ³€μ„ λ°›μ„ μ μμµλ‹λ‹¤

---

## π”§ λ¬Έμ  ν•΄κ²°

### "Try it out" λ²„νΌμ΄ μ‘λ™ν•μ§€ μ•μ„ λ•
- νμ΄μ§€λ¥Ό μƒλ΅κ³ μΉ¨ν•΄λ³΄μ„Έμ”
- μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈν•μ„Έμ”

### μ”μ²­μ΄ μ‹¤ν¨ν•  λ•
- μ”μ²­ λ³Έλ¬Έ ν•μ‹μ΄ μ¬λ°”λ¥Έμ§€ ν™•μΈ (JSON ν•μ‹)
- ν•„μ ν•„λ“λ¥Ό λ¨λ‘ μ…λ ¥ν–λ”μ§€ ν™•μΈ
- μ„λ²„ λ΅κ·Έ ν™•μΈ (`logs/app.log`)

### μ‘λ‹µμ΄ λλ¦΄ λ•
- `n_results` κ°’μ„ μ¤„μ—¬λ³΄μ„Έμ”
- `document_types` ν•„ν„°λ¥Ό μ‚¬μ©ν•μ—¬ κ²€μƒ‰ λ²”μ„λ¥Ό μΆν€λ³΄μ„Έμ”

---

## π“ μ¶”κ°€ λ¦¬μ†μ¤

- **ReDoc λ¬Έμ„**: http://localhost:8000/redoc (λ‹¤λ¥Έ μ¤νƒ€μΌμ API λ¬Έμ„)
- **OpenAPI μ¤ν‚¤λ§**: http://localhost:8000/openapi.json (JSON ν•μ‹)
- **μ‚¬μ© κ°€μ΄λ“**: `USAGE_GUIDE.md` μ°Έμ΅°

---

μ΄μ  Swagger UIλ¥Ό μ‚¬μ©ν•μ—¬ APIλ¥Ό μ‰½κ² ν…μ¤νΈν•κ³  μ‚¬μ©ν•  μ μμµλ‹λ‹¤! π‰

